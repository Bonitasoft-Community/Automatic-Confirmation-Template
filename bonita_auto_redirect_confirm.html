<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="description" content="Bonita Forms Application" />
<link href="css/bonita_form_default.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<div class="bonita_form_container">
		<div id="bonita_form_confirm_message" class="bonita_form_confirm_message"></div>
		<div id="bonita_form_confirm_todolist" class="bonita_form_confirm_todolist"></div>
		
		<script type="text/javascript">
		//Original code by Philippe OZIL at Bonitasoft, GPL v2.
		// Settings for checking for a next available task
		var nextTaskCheckRetries = 20;
		var nextTaskCheckDelay = 200;
		
		// Checks for a next available task and redirect to it
		function checkForNextTask()
		{
			var linkElement = getLinkElement();
			if (linkElement == null)
			{
				nextTaskCheckRetries --;
				if (nextTaskCheckRetries > 0)
					setTimeout(checkForNextTask, nextTaskCheckDelay);
			}
			else // Move to next task
				linkElement.click();
		}
		
		// Retrieves next task link if available
		function getLinkElement()
		{
			var linkElement = null;
			var rootElement = document.getElementById('bonita_form_confirm_todolist');
			if (rootElement.childNodes.length > 0)
			{
				rootElement = rootElement.childNodes[0];
				if (rootElement.childNodes.length > 1)
					linkElement = rootElement.childNodes[1];
			}
			return linkElement;
		}
		// First run
		checkForNextTask();
		</script>
		
	</div>
</body>
</html>
